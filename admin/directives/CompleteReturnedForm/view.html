<div class="col-lg-12">
    <!-- select returned items -->
    <div class="panel panel-default">
        <div class="panel-heading">
            選擇退貨的數量
        </div>
        <div class="panel-body">
            <div class="col-lg-12">
                <form>
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="text-center">產品名稱</td>
                                <th class="text-center">規格</td>
                                <th class="text-center">單價</td>
                                <th class="text-center">已購數量</td>
                                <th class="text-center">退貨數量</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="record in spec.records" ng-init="record.spec_returned_amount=0">
                                <td class="text-center">{{record.product_name}}</td>
                                <td class="text-center">{{record.spec_name}}</td>
                                <td class="text-center">{{record.spec_unit_price}}</td>
                                <td class="text-center">{{record.spec_amount}}</td>
                                <td class="text-center">
                                    <input
                                            type="text"
                                            class="form-control text-right"
                                            placeholder="退貨的數量, 不得超過 {{record.spec_amount}}"
                                            ng-model="record.spec_returned_amount"
                                            ng-change="changeReturnedAmount(record)">
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <input type="button" class="btn btn-default" value="計算異動金額" ng-click="clickPreviewCompleteReturned()" ng-disabled="!(enableComputeButton)"></input>
                </form>
            </div>
            <!-- /.row (nested) -->
        </div>
        <!-- /.panel-body -->
    </div>
    <!-- /.select returned items -->

    <!-- returned info -->
    <div class="panel panel-default" ng-show="showReturnedInfo">
        <div class="panel-heading">
            退貨的金額異動表
        </div>
        <div class="panel-body">
            <div class="col-lg-12">
                <form>
                    <table class="table">
                        <thead></thead>
                            <tr>
                                <th class="text-center"></td>
                                <th class="text-center">原訂單金額</td>
                                <th class="text-center">新訂單金額</td>
                                <th class="text-center">退款金額</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="text-center">商品</td>
                                <td class="text-center">{{returned.originTotalPrice}}</td>
                                <td class="text-center">{{returned.newTotalPrice}}</td>
                                <td class="text-center">{{returned.totalPriceMargin}}</td>
                            </tr>

                            <tr>
                                <td class="text-center">運費</td>
                                <td class="text-center">{{returned.originFare}}</td>
                                <td class="text-center">{{returned.newFare}}</td>
                                <td class="text-center">{{returned.fareMargin}}</td>
                            </tr>

                            <tr>
                                <td class="text-center">折扣</td>
                                <td class="text-center">{{returned.originDiscount}}</td>
                                <td class="text-center">{{returned.newDiscount}}</td>
                                <td class="text-center">{{returned.discountMargin}}</td>
                            </tr>

                            <tr>
                                <td class="text-center">總計</td>
                                <td class="text-center">{{returned.originFinalPrice}}</td>
                                <td class="text-center">{{returned.newFinalPrice}}</td>
                                <td class="text-center">{{returned.finalPriceMargin}}</td>
                            </tr>
                        </tbody>
                    </table>

                    <input type="button" class="btn btn-danger" value="完成退費 {{returned.finalPriceMargin}} 元" ng-click="clickCompleteReturned()"></input>
                </form>
            </div>
            <!-- /.row (nested) -->
        </div>
        <!-- /.panel-body -->
    </div>
    <!-- /.returned info -->
</div>
<sb-alert instance="alert"></sb-alert>